<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>GCD技术使用 | ShanGe 的 Coding 漫漫路</title>
  <meta name="author" content="Tian Shanshan">
  
  <meta name="description" content="GCD(中央调度). GCD是一套底层的API, 通过GCD开发者只需要向队列中添加一段代码块(block或C函数指针), 而不需要直接和线程打交道。GCD在后端管理着一个线程池, 它不仅决定着你的代码块将在哪个线程被执行, 还根据可用的系统资源对这些线程进行管理。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="GCD技术使用"/>
  <meta property="og:site_name" content="ShanGe 的 Coding 漫漫路"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link rel="alternate" href="/atom.xml" title="ShanGe 的 Coding 漫漫路" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <!-- wumiiVerification -->
  <meta name="wumiiVerification" content="fb50a101-84fe-4ca2-91a7-ae8cf792978b" />
  <meta name="wumiiVerification" content="d73b5866-c390-4156-a4dd-51b526b5335e" />
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Font-Awesome -->
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

</head>

<body>
  <header id="header"><div class= "header-content inner">
	<div class = "alignleft col-one">
		
			<div class='avatar'>
				<img src = "/img/default/avatar.jpg">
              </div>
		
		<div class="header-div">
		    <h1><a href="/">ShanGe 的 Coding 漫漫路</a></h1>
		    <h2><a href="/">要做的只是静下心来,大步向前,然后泰然的接受一切,冷静的处理一切！</a></h2>
		</div>
	</div>
	<div class = "alignright col-two">
		
	</div>
	<div class="clearfix"></div>
</div>

<div class= "header-nav">
	<div class='header-nav-content inner'>
		<div id="main-nav" class="alignleft">
		    		
		    		  <a href="/"><i class="fa fa-home"></i>首页</a>
		    		
		    		  <a href="/categories/collection"><i class="fa fa-pencil"></i>文集</a>
		    		
		    		  <a href="/archives"><i class="fa fa-archive"></i>归档</a>
		    		
		    		  <a href="/me"><i class="fa fa-user"></i>关于我</a>
		    		
		</div>
		<div id="sub-nav" class="alignright">
		    
		      <a href="/atom.xml"><i class="fa fa-rss"></i>Rss</a>
		    
		      <a href="/customization"><i class="fa fa-question-circle"></i>Customization</a>
		    
		</div>
	</div>
	<div class="clearfix"></div>
</div>
</header>
  
    <div id="content" class="inner">
      <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2016-11-11T10:22:52.000Z"><a href="/2016/11/11/GCD技术使用/">2016-11-11</a></time>
        
  
    <h1 class="title">GCD技术使用</h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#GCD中重要的概念"><span class="toc-text">GCD中重要的概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#简单的应用"><span class="toc-text">简单的应用</span></a></li></ol>
    </div>

        <p>GCD(中央调度). GCD是一套底层的API, 通过GCD开发者只需要向队列中添加一段代码块(block或C函数指针), 而不需要直接和线程打交道。GCD在后端管理着一个线程池, 它不仅决定着你的代码块将在哪个线程被执行, 还根据可用的系统资源对这些线程进行管理。<br><a id="more"></a></p>
<h5 id="GCD中重要的概念"><a href="#GCD中重要的概念" class="headerlink" title="GCD中重要的概念"></a>GCD中重要的概念</h5><ul>
<li>1.任务</li>
<li><p>2.串行队列, 并行队列</p>
<p>  我们在使用GCD的简单应用中, 其实最关心的就是上边指出的两个概念. 我们来一一讲解一下:<br></p>
<ul>
<li>1.任务, 其实就是要做的一件事, 在程序中体现为一个block或者函数指针.<br></li>
<li>2.串行队列, 一个拥有次序的队列, 将任务放入到该类型的队列中, 然后任务就会有一个次序, 先进先出. DISPATCH_QUEUE_SERIAL</li>
<li>3.并行队列, 将任务放入到该类型的队列中, 这些任务会并发的执行, 没有先后顺序(其实说没有先后顺序是不准确的, 因为并发队列虽然是能同时执行多个任务, 但这些任务仍然是按照先到先执行的顺序来执行的, 知识感觉上像是同时执行的, 也就是说这些任务是同时进行的, 但是起始的时间是有先后顺序的, 而这个起始时间就跟加入并行队列的先后有关系, 同样是先进入先执行)。并发队列会基于系统负载来合适地选择并发执行这些任务. 根据不同的系统, 并发的通道数是不一样的. 并发队列一般指的就是全局队列(Global queue), 进程中存在四个全局队列: 高, 中(默认), 低, 后台四个优先级队列, 我们可以通过dispatch_get_global_queue函数传入对应优先级来访问队列. 当然我们也可以用DISPATCH_QUEUE_CONCURRENT来自己创建一个并发队列.</li>
</ul>
</li>
</ul>
<h5 id="简单的应用"><a href="#简单的应用" class="headerlink" title="简单的应用"></a>简单的应用</h5><ul>
<li>1.创建各种队列</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取优先级的全局并行队列</span></div><div class="line"><span class="built_in">dispatch_queue_t</span> queue1 = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line"><span class="comment">//获取主队列</span></div><div class="line"><span class="built_in">dispatch_queue_t</span> queue2 = dispatch_get_main_queue();</div><div class="line"><span class="comment">//未指定队列Type则默认为串行队列</span></div><div class="line"><span class="built_in">dispatch_queue_t</span> queue3 = dispatch_queue_create(<span class="string">"queue3"</span>, <span class="literal">NULL</span>);</div><div class="line"><span class="comment">//串行队列</span></div><div class="line"><span class="built_in">dispatch_queue_t</span> queue4 = dispatch_queue_create(<span class="string">"queue4"</span>,DISPATCH_QUEUE_SERIAL);</div><div class="line"><span class="comment">//并行队列</span></div><div class="line"><span class="built_in">dispatch_queue_t</span> queue5 = dispatch_queue_create(<span class="string">"queue5"</span>,DISPATCH_QUEUE_CONCURRENT);</div></pre></td></tr></table></figure>
<ul>
<li><p>2.队列与任务的组合使用形式(6种)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line"></div><div class="line">    <span class="comment">//异步并行队列, 一看异步就知道一定会开辟线程, 但是线程开多少个啦？ 这个跟设备内核多少有关系, 具体开辟多少线程不能确定, 但是可以肯定的是, 开辟的线程个数是有限制的(视设备而定...), 并行队列中的任务执行是没有先后顺序的, 这个还要考虑到并行开辟的线程个数有关系</span></div><div class="line"><span class="comment">//    [self async_concurrent];</span></div><div class="line">    </div><div class="line">    <span class="comment">//异步串行队列, 一看异步就知道一定会开辟线程, 再听串行就可以肯定 只会开辟一个线程, 串行队列中的任务是按照串行队列中的先后顺序执行的</span></div><div class="line"><span class="comment">//    [self async_serial];</span></div><div class="line">    </div><div class="line">    <span class="comment">//异步主队列,主队列本身就是一个串行队列, 所以一看异步就感觉要开辟子线程, 但是这个线程是主线程, 所以不会去开辟子线程了, 当然主队列中的任务肯定也是顺序执行的</span></div><div class="line"><span class="comment">//    [self async_mainQueue];</span></div><div class="line">    </div><div class="line">    <span class="comment">//同步并行队列</span></div><div class="line"><span class="comment">//    [self sync_concurrent];</span></div><div class="line">    </div><div class="line">    <span class="comment">//同步串行队列</span></div><div class="line"><span class="comment">//    [self sync_serial];</span></div><div class="line">    </div><div class="line">    <span class="comment">//同步主队列</span></div><div class="line">    [<span class="keyword">self</span> sync_mainQueue];</div><div class="line"></div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"当执行  同步主队列  的时候,会阻塞主线程, 程序卡死, 走不到这一句来..."</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//异步任务 + 并行队列</span></div><div class="line">- (<span class="keyword">void</span>)async_concurrent&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> concurrent_queue1 = dispatch_queue_create(<span class="string">"concurrent_queue1"</span>, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"------------concurrent_queue1------start------------------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(concurrent_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(concurrent_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(concurrent_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"------------concurrent_queue1--------end----------------------"</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//异步任务 + 串行队列</span></div><div class="line">- (<span class="keyword">void</span>)async_serial&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> serial_queue1 = dispatch_queue_create(<span class="string">"serial_queue1"</span>, DISPATCH_QUEUE_SERIAL);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"----------serial_queue1-----------start---------------------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(serial_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(serial_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(serial_queue1, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3-------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"-----------serial_queue1-----------end---------------------"</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//异步任务 + 主队列</span></div><div class="line">- (<span class="keyword">void</span>)async_mainQueue&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> main_queue = dispatch_get_main_queue();</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"----------main_queue1----------start-----------------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(main_queue, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(main_queue, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(main_queue, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"---------main_queue1------------end---------------------"</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//同步任务 + 并行队列</span></div><div class="line">- (<span class="keyword">void</span>)sync_concurrent&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> concurrent_queue2 = dispatch_queue_create(<span class="string">"concurrent_queue2"</span>, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"---------------------concurrent_queue2------------start-------------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(concurrent_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1-----------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(concurrent_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2-----------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(concurrent_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3-----------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"--------------------concurrent_queue2-------------end----------------"</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//同步任务 + 串行队列</span></div><div class="line">- (<span class="keyword">void</span>)sync_serial&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> serial_queue2 = dispatch_queue_create(<span class="string">"serial_queue2"</span>, DISPATCH_QUEUE_SERIAL);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"------------------serial_queue2-----------start--------------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(serial_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(serial_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(serial_queue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3--------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"----------------serial_queue2-----------end-----------------"</span>);</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//同步任务 + 主队列-------------这个很危险会阻塞</span></div><div class="line">- (<span class="keyword">void</span>)sync_mainQueue&#123;</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_queue_t</span> mainQueue2 = dispatch_get_main_queue();</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"------------mainQueue2-----------start---------"</span>);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(mainQueue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务1---------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(mainQueue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务2---------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_sync</span>(mainQueue2, ^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"任务3---------%@"</span>,[<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"-----------mainQueue2-------------end--------------"</span>);</div><div class="line">&#125;</div><div class="line"></div></pre></td></tr></table></figure>
</li>
<li><p>3.GCD延迟执行(异步任务,是否开辟线程还是看将任务加入什么类型的队列中)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_main_queue();</div><div class="line">dispatch_after(dispatch_time(DISPATCH_TIME_NOW,(int64_t)(<span class="number">5.0</span> * <span class="built_in">NSEC_PER_SEC</span>)),queue, ^&#123;</div><div class="line">	<span class="comment">//coding...延迟执行的任务</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>4.GCD中的dispatch_once(主线程中执行)</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">	<span class="comment">//coding..., 只执行一次任务</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>4.GCD中的 dispatch_group_t </p>
</li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/iOS/">iOS</a>
  </div>

        
  <div class="tags">
    <a href="/tags/GCD/">GCD</a>, <a href="/tags/多线程/">多线程</a>
  </div>

        <div class = "counter">
  <span id="busuanzi_container_page_pv" style="display:none">
      总访问&nbsp<span id="busuanzi_value_page_pv"></span>&nbsp次
  </span>
</div>
        
  <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a title="分享到QQ空间" href="#" class="bds_qzone" data-cmd="qzone"></a><a title="分享到新浪微博" href="#" class="bds_tsina" data-cmd="tsina"></a><a title="分享到腾讯微博" href="#" class="bds_tqq" data-cmd="tqq"></a><a title="分享到人人网" href="#" class="bds_renren" data-cmd="renren"></a><a title="分享到微信" href="#" class="bds_weixin" data-cmd="weixin"></a></div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>

  
<section id = "relate">
	
                <div id="null"></div>
	
</section>


  
    <section id="comment">
    <!--   <h1 class="title">Comments</h1> -->
    
    
        <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="2016/11/11/GCD技术使用/" data-title="GCD技术使用" data-url="http://yoursite.com/2016/11/11/GCD技术使用/"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
        var duoshuoQuery = {short_name:"lupeng-test"};
          (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
             || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
          </script>
        <!-- 多说公共JS代码 end -->

      
    </section>




</div></div>
      <aside id="sidebar" class="alignright">
   <div class="search">
  <form action="/search/index.html" method="get" accept-charset="utf-8">
<!--     <input type="search" name="wd"results="0" placeholder="Search">
    <input type="hidden" name="wd" value="site:yoursite.com"> -->
     <input type="text" id="search" class="st-default-search-input" placeholder="Search" style="height: 100%" />
  </form>
</div> 

  
<div class="widget tag">
  <h3 class="title" id="categories">Categories</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NSTimer/">NSTimer</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Runloop/">Runloop</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Runloop/iOS/">iOS</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP/IP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/Runtime/">Runtime</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/">ios</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios开发篇/">ios开发篇</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios项目开发经验/">ios项目开发经验</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">2</span></li></ul> 
</div>
 


  <div class="widget tag">
  <h3 class="title">Calendar</h3>
  <div id="calendar"></div>
</div>


  


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/GCD/" style="font-size: 10px;">GCD</a> <a href="/tags/Linux-常用命令/" style="font-size: 10px;">Linux 常用命令</a> <a href="/tags/Linux-Shell基础/" style="font-size: 10px;">Linux-Shell基础</a> <a href="/tags/Linux-Shell基础awk命令/" style="font-size: 10px;">Linux-Shell基础awk命令</a> <a href="/tags/Linux-Shell基础cut命令/" style="font-size: 10px;">Linux-Shell基础cut命令</a> <a href="/tags/Linux-Shell基础printf命令/" style="font-size: 10px;">Linux-Shell基础printf命令</a> <a href="/tags/Linux-Shell基础sed命令/" style="font-size: 10px;">Linux-Shell基础sed命令</a> <a href="/tags/Linux-Shell基础字符处理命令/" style="font-size: 10px;">Linux-Shell基础字符处理命令</a> <a href="/tags/Linux-Shell基础条件判断/" style="font-size: 10px;">Linux-Shell基础条件判断</a> <a href="/tags/Linux使用错误详记/" style="font-size: 10px;">Linux使用错误详记</a> <a href="/tags/Linux文件搜索命令/" style="font-size: 10px;">Linux文件搜索命令</a> <a href="/tags/Linux权限管理命令/" style="font-size: 10px;">Linux权限管理命令</a> <a href="/tags/Linux环境变量配置/" style="font-size: 10px;">Linux环境变量配置</a> <a href="/tags/Linux用户和用户组管理/" style="font-size: 10px;">Linux用户和用户组管理</a> <a href="/tags/Linux的软件包管理/" style="font-size: 10px;">Linux的软件包管理</a> <a href="/tags/Linux目录分析/" style="font-size: 10px;">Linux目录分析</a> <a href="/tags/Linux系统常用软件安装/" style="font-size: 10px;">Linux系统常用软件安装</a> <a href="/tags/NSTimer/" style="font-size: 10px;">NSTimer</a> <a href="/tags/Runloop/" style="font-size: 10px;">Runloop</a> <a href="/tags/Runtime/" style="font-size: 10px;">Runtime</a> <a href="/tags/Shell基础/" style="font-size: 10px;">Shell基础</a> <a href="/tags/TCP-IP/" style="font-size: 10px;">TCP/IP</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/ios中的NSData类/" style="font-size: 10px;">ios中的NSData类</a> <a href="/tags/ios中的NSSet类/" style="font-size: 10px;">ios中的NSSet类</a> <a href="/tags/ios中的UITouch类/" style="font-size: 10px;">ios中的UITouch类</a> <a href="/tags/ios中的各种事件/" style="font-size: 10px;">ios中的各种事件</a> <a href="/tags/ios国际化/" style="font-size: 10px;">ios国际化</a> <a href="/tags/ios开发常用小代码/" style="font-size: 10px;">ios开发常用小代码</a> <a href="/tags/linux压缩解压命令/" style="font-size: 10px;">linux压缩解压命令</a> <a href="/tags/linux用户管理命令/" style="font-size: 10px;">linux用户管理命令</a> <a href="/tags/linux网络命令/" style="font-size: 10px;">linux网络命令</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/objective-c/" style="font-size: 20px;">objective-c</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/工厂模式/" style="font-size: 10px;">工厂模式</a> <a href="/tags/策略模式/" style="font-size: 10px;">策略模式</a> <a href="/tags/网络通信协议/" style="font-size: 10px;">网络通信协议</a>
  </div>
</div>


  
  <div class="widget tag">
    <h3 class="title">归档</h3>
	<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">2017年01月</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">2016年12月</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">2016年11月</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">2016年10月</a><span class="archive-list-count">6</span></li></ul>
  </div>

</aside>
      <div class="clearfix"></div>
    </div>
  
  <footer id="footer"><div class="footer-content inner">
  <div class="alignleft">
  
    &copy; 2017 Tian Shanshan
    
  </div>
  <div class="alignright">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme
    <a href="https://github.com/pengloo53/Hexo-theme-light_cn">light_cn</a>
  </div>
  
  <div class="visit">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
  </div>
  
  <div class="clearfix"></div>
</div></footer>
  <script src="http://libs.baidu.com/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<!-- calendar widget -->

  <script src="/js/calendar.js"></script>
  <script src="/js/languages.js"></script>
  <script type="text/javascript">
    $(function() {
    
      $('#calendar').aCalendar('zh-CN',{single:undefined, root:'calendar'});
    
    });
  </script>


<!-- 『不蒜子』计数服务 -->
<script async src="http://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- wumii关联推荐 -->
<script type="text/javascript" src="http://widget.wumii.cn/ext/relatedItemsWidget"></script>

<!-- 百度推荐 -->

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?9acf0cedd48dc53be256ede5a98c2aaa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div>

<!-- 站内搜索-Swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','sC-iNFrvTTNtiXEVNwo1','2.0.0');
</script>

<!-- fancybox -->

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
